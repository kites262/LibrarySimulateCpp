<html>
<head>
<title>_Interface.cpp</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #b3ae60;}
.s1 { color: #bcbec4;}
.s2 { color: #6aab73;}
.s3 { color: #cf8e6d;}
.s4 { color: #bcbec4;}
.s5 { color: #2aacb8;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
_Interface.cpp</font>
</center></td></tr></table>
<pre><span class="s0">#include </span><span class="s2">&quot;project.h&quot;</span>
<span class="s0">#include </span><span class="s2">&lt;conio.h&gt;</span>

<span class="s3">class </span><span class="s1">Interface </span><span class="s4">{</span>
	<span class="s3">public</span><span class="s1">:</span>
	<span class="s1">Library</span><span class="s4">* </span><span class="s1">lib</span><span class="s4">;</span>
	<span class="s1">String username</span><span class="s4">;</span>
	<span class="s3">const </span><span class="s1">String prefix </span><span class="s4">= </span><span class="s2">&quot;!INFO&gt; &quot;</span><span class="s4">;</span>

	<span class="s1">Interface</span><span class="s4">(</span><span class="s1">Library</span><span class="s4">* </span><span class="s1">lib</span><span class="s4">, </span><span class="s3">const </span><span class="s1">String</span><span class="s4">&amp; </span><span class="s1">username</span><span class="s4">) </span><span class="s1">: lib</span><span class="s4">(</span><span class="s1">lib</span><span class="s4">), </span><span class="s1">username</span><span class="s4">(</span><span class="s1">username</span><span class="s4">) {}</span>

	<span class="s3">void </span><span class="s1">change_user</span><span class="s4">() {</span>
		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s1">prefix </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;Please enter your username: &quot;</span><span class="s4">;</span>
		<span class="s1">str</span><span class="s4">(</span><span class="s1">username</span><span class="s4">);</span>
	<span class="s4">}</span>

	<span class="s3">static void </span><span class="s1">newline</span><span class="s4">() {</span>
		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
	<span class="s4">}</span>

	<span class="s3">static int </span><span class="s1">key</span><span class="s4">() {</span>
		<span class="s3">return </span><span class="s1">_getch</span><span class="s4">();</span>
	<span class="s4">}</span>

	<span class="s3">static void </span><span class="s1">str</span><span class="s4">(</span><span class="s1">String</span><span class="s4">&amp; </span><span class="s1">s</span><span class="s4">) {</span>
		<span class="s1">std::getline</span><span class="s4">(</span><span class="s1">std::cin</span><span class="s4">, </span><span class="s1">s</span><span class="s4">);</span>
	<span class="s4">}</span>

	<span class="s3">void </span><span class="s1">search_book</span><span class="s4">() </span><span class="s3">const </span><span class="s4">{</span>
		<span class="s1">String title</span><span class="s4">;</span>
		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s1">prefix </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;Please enter the book title: &quot;</span><span class="s4">;</span>
		<span class="s1">str</span><span class="s4">(</span><span class="s1">title</span><span class="s4">);</span>

		<span class="s3">if</span><span class="s4">( </span><span class="s1">lib</span><span class="s4">-&gt;</span><span class="s1">searchBook</span><span class="s4">(</span><span class="s1">title</span><span class="s4">) == </span><span class="s3">nullptr </span><span class="s4">) {</span>
			<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s1">prefix </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;Book &quot; </span><span class="s4">&lt;&lt; </span><span class="s1">title </span><span class="s4">&lt;&lt; </span><span class="s2">&quot; not found!&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s4">}</span><span class="s3">else </span><span class="s4">{</span>
			<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s1">prefix </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;Book &quot; </span><span class="s4">&lt;&lt; </span><span class="s1">title </span><span class="s4">&lt;&lt; </span><span class="s2">&quot; found available.&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s4">}</span>
	<span class="s4">}</span>

	<span class="s3">void </span><span class="s1">borrow_book</span><span class="s4">() </span><span class="s3">const </span><span class="s4">{</span>
		<span class="s1">String title</span><span class="s4">;</span>

		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s1">prefix </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;Please enter the book title: &quot;</span><span class="s4">;</span>
		<span class="s1">str</span><span class="s4">(</span><span class="s1">title</span><span class="s4">);</span>

		<span class="s1">Book</span><span class="s4">* </span><span class="s1">book </span><span class="s4">= </span><span class="s1">lib</span><span class="s4">-&gt;</span><span class="s1">searchBook</span><span class="s4">(</span><span class="s1">title</span><span class="s4">);</span>

		<span class="s3">if</span><span class="s4">(</span><span class="s1">book </span><span class="s4">== </span><span class="s3">nullptr</span><span class="s4">) {</span>
			<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s1">prefix </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;Book &quot; </span><span class="s4">&lt;&lt; </span><span class="s1">title </span><span class="s4">&lt;&lt; </span><span class="s2">&quot; not found!&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s4">}</span><span class="s3">else if</span><span class="s4">(</span><span class="s1">book</span><span class="s4">-&gt;</span><span class="s1">isAvailable</span><span class="s4">()) {</span>
			<span class="s1">lib</span><span class="s4">-&gt;</span><span class="s1">getReader</span><span class="s4">(</span><span class="s1">username</span><span class="s4">)-&gt;</span><span class="s1">borrowBook</span><span class="s4">(</span><span class="s1">book</span><span class="s4">);</span>
			<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s1">prefix </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;Book &quot; </span><span class="s4">&lt;&lt; </span><span class="s1">title </span><span class="s4">&lt;&lt; </span><span class="s2">&quot; borrowed successfully by user: &quot; </span><span class="s4">&lt;&lt; </span><span class="s1">username</span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s4">}</span><span class="s3">else </span><span class="s4">{</span>
			<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s1">prefix </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;Book &quot; </span><span class="s4">&lt;&lt; </span><span class="s1">title </span><span class="s4">&lt;&lt; </span><span class="s2">&quot; is not available!&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s4">}</span>
	<span class="s4">}</span>

	<span class="s3">void </span><span class="s1">return_book</span><span class="s4">() </span><span class="s3">const </span><span class="s4">{</span>
		<span class="s1">String title</span><span class="s4">;</span>

		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s1">prefix </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;Please enter the book title to return: &quot;</span><span class="s4">;</span>
		<span class="s1">str</span><span class="s4">(</span><span class="s1">title</span><span class="s4">);</span>

		<span class="s3">if</span><span class="s4">(!</span><span class="s1">lib</span><span class="s4">-&gt;</span><span class="s1">getBook</span><span class="s4">(</span><span class="s1">title</span><span class="s4">)-&gt;</span><span class="s1">isAvailable</span><span class="s4">()) {</span>
			<span class="s1">lib</span><span class="s4">-&gt;</span><span class="s1">getReader</span><span class="s4">(</span><span class="s1">username</span><span class="s4">)-&gt;</span><span class="s1">returnBook</span><span class="s4">(</span><span class="s1">title</span><span class="s4">);</span>
			<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s1">prefix </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;Book &quot; </span><span class="s4">&lt;&lt; </span><span class="s1">title </span><span class="s4">&lt;&lt; </span><span class="s2">&quot; returned successfully by user: &quot; </span><span class="s4">&lt;&lt; </span><span class="s1">username </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s4">}</span><span class="s3">else </span><span class="s4">{</span>
			<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s1">prefix </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;Book &quot; </span><span class="s4">&lt;&lt; </span><span class="s1">title </span><span class="s4">&lt;&lt; </span><span class="s2">&quot; is not borrowed by user: &quot; </span><span class="s4">&lt;&lt; </span><span class="s1">username </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s4">}</span>
	<span class="s4">}</span>

	<span class="s3">void </span><span class="s1">admin_add_book</span><span class="s4">() </span><span class="s3">const  </span><span class="s4">{</span>
		<span class="s1">String title</span><span class="s4">;</span>

		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s1">prefix </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;Please enter the book title to add: &quot;</span><span class="s4">;</span>
		<span class="s1">str</span><span class="s4">(</span><span class="s1">title</span><span class="s4">);</span>

		<span class="s3">if</span><span class="s4">(</span><span class="s1">lib</span><span class="s4">-&gt;</span><span class="s1">searchBook</span><span class="s4">(</span><span class="s1">title</span><span class="s4">) == </span><span class="s3">nullptr</span><span class="s4">) {</span>
			<span class="s1">lib</span><span class="s4">-&gt;</span><span class="s1">addBook</span><span class="s4">(</span><span class="s1">title</span><span class="s4">);</span>
			<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s1">prefix </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;Book &quot; </span><span class="s4">&lt;&lt; </span><span class="s1">title </span><span class="s4">&lt;&lt; </span><span class="s2">&quot; added by admin.&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s4">}</span><span class="s3">else </span><span class="s4">{</span>
			<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s1">prefix </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;Book &quot; </span><span class="s4">&lt;&lt; </span><span class="s1">title </span><span class="s4">&lt;&lt; </span><span class="s2">&quot; already exists!&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s4">}</span>
	<span class="s4">}</span>

	<span class="s3">void </span><span class="s1">admin_remove_book</span><span class="s4">() </span><span class="s3">const </span><span class="s4">{</span>
		<span class="s1">String title</span><span class="s4">;</span>

		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s1">prefix </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;Please enter the book title to remove: &quot;</span><span class="s4">;</span>
		<span class="s1">str</span><span class="s4">(</span><span class="s1">title</span><span class="s4">);</span>

		<span class="s3">if </span><span class="s4">(</span><span class="s1">lib</span><span class="s4">-&gt;</span><span class="s1">searchBook</span><span class="s4">(</span><span class="s1">title</span><span class="s4">) == </span><span class="s3">nullptr</span><span class="s4">) {</span>
			<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s1">prefix </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;Book &quot; </span><span class="s4">&lt;&lt; </span><span class="s1">title </span><span class="s4">&lt;&lt; </span><span class="s2">&quot; not found!&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s4">}</span><span class="s3">else </span><span class="s4">{</span>
			<span class="s1">lib</span><span class="s4">-&gt;</span><span class="s1">removeBook</span><span class="s4">(</span><span class="s1">title</span><span class="s4">);</span>
			<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s1">prefix </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;Book &quot; </span><span class="s4">&lt;&lt; </span><span class="s1">title </span><span class="s4">&lt;&lt; </span><span class="s2">&quot; removed by admin.&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s4">}</span>
	<span class="s4">}</span>

	<span class="s3">void </span><span class="s1">list_user_book</span><span class="s4">() </span><span class="s3">const </span><span class="s4">{</span>
		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s1">prefix </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;User: &quot; </span><span class="s4">&lt;&lt; </span><span class="s1">username </span><span class="s4">&lt;&lt; </span><span class="s2">&quot; have borrowed: &quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s1">lib</span><span class="s4">-&gt;</span><span class="s1">getReader</span><span class="s4">(</span><span class="s1">username</span><span class="s4">)-&gt;</span><span class="s1">showBooks</span><span class="s4">();</span>
	<span class="s4">}</span>

	<span class="s3">void </span><span class="s1">list_lib_book</span><span class="s4">() </span><span class="s3">const </span><span class="s4">{</span>
		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s1">prefix </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;The Library has: &quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s1">lib</span><span class="s4">-&gt;</span><span class="s1">showBooksTable</span><span class="s4">();</span>
	<span class="s4">}</span>

	<span class="s3">static void </span><span class="s1">menu_user_info</span><span class="s4">() {</span>
		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;1. Search book&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;2. Borrow book&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;3. Return book&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;4. User books&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;5. Library books&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;q. Quit&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;--------&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
	<span class="s4">}</span>

	<span class="s3">static void </span><span class="s1">menu_admin_info</span><span class="s4">() {</span>
		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;1. Search book&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;2. Borrow book&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;3. Return book&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;4. User books&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;5. Library books&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;--------&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;a. Add book&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;b. Remove book&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;o. Quit only&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;q. Save&amp;Quit&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;--------&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
	<span class="s4">}</span>

	<span class="s3">void </span><span class="s1">menu_user</span><span class="s4">() </span><span class="s3">const </span><span class="s4">{</span>
		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s1">username </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;$&gt; &quot;</span><span class="s4">;</span>
		<span class="s3">int </span><span class="s1">c </span><span class="s4">= </span><span class="s1">key</span><span class="s4">();</span>
		<span class="s3">switch </span><span class="s4">(</span><span class="s1">c</span><span class="s4">) {</span>
			<span class="s3">case </span><span class="s2">'1'</span><span class="s1">:</span>
				<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;1-&gt;Search&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
				<span class="s1">search_book</span><span class="s4">();</span>
				<span class="s3">break</span><span class="s4">;</span>
			<span class="s3">case </span><span class="s2">'2'</span><span class="s1">:</span>
				<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;2-&gt;Borrow&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
				<span class="s1">borrow_book</span><span class="s4">();</span>
				<span class="s3">break</span><span class="s4">;</span>
			<span class="s3">case </span><span class="s2">'3'</span><span class="s1">:</span>
				<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;3-&gt;Return&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
				<span class="s1">return_book</span><span class="s4">();</span>
				<span class="s3">break</span><span class="s4">;</span>
			<span class="s3">case </span><span class="s2">'4'</span><span class="s1">:</span>
				<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;4-&gt;User&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
				<span class="s1">list_user_book</span><span class="s4">();</span>
				<span class="s3">break</span><span class="s4">;</span>
			<span class="s3">case </span><span class="s2">'5'</span><span class="s1">:</span>
				<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;5-&gt;Libray&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
				<span class="s1">list_lib_book</span><span class="s4">();</span>
				<span class="s3">break</span><span class="s4">;</span>
			<span class="s3">case </span><span class="s2">'q'</span><span class="s1">:</span>
				<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;q-&gt;Exit&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
				<span class="s1">exit</span><span class="s4">(</span><span class="s5">0</span><span class="s4">);</span>
			<span class="s3">default</span><span class="s1">:</span>
				<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;Invalid choice!&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s4">}</span>
		<span class="s1">newline</span><span class="s4">();</span>
	<span class="s4">}</span>

	<span class="s3">void </span><span class="s1">menu_admin</span><span class="s4">() </span><span class="s3">const </span><span class="s4">{</span>
		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;Admin$&gt; &quot;</span><span class="s4">;</span>
		<span class="s3">int </span><span class="s1">c </span><span class="s4">= </span><span class="s1">key</span><span class="s4">();</span>
		<span class="s3">switch </span><span class="s4">(</span><span class="s1">c</span><span class="s4">) {</span>
			<span class="s3">case </span><span class="s2">'1'</span><span class="s1">:</span>
				<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;1-&gt;Search&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
				<span class="s1">search_book</span><span class="s4">();</span>
				<span class="s3">break</span><span class="s4">;</span>
			<span class="s3">case </span><span class="s2">'2'</span><span class="s1">:</span>
				<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;2-&gt;Borrow&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
				<span class="s1">borrow_book</span><span class="s4">();</span>
				<span class="s3">break</span><span class="s4">;</span>
			<span class="s3">case </span><span class="s2">'3'</span><span class="s1">:</span>
				<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;3-&gt;Return&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
				<span class="s1">return_book</span><span class="s4">();</span>
				<span class="s3">break</span><span class="s4">;</span>
			<span class="s3">case </span><span class="s2">'4'</span><span class="s1">:</span>
				<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;4-&gt;User&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
				<span class="s1">list_user_book</span><span class="s4">();</span>
				<span class="s3">break</span><span class="s4">;</span>
			<span class="s3">case </span><span class="s2">'5'</span><span class="s1">:</span>
				<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;5-&gt;Libray&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
				<span class="s1">list_lib_book</span><span class="s4">();</span>
				<span class="s3">break</span><span class="s4">;</span>
			<span class="s3">case </span><span class="s2">'a'</span><span class="s1">:</span>
				<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;a-&gt;Add&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
				<span class="s1">admin_add_book</span><span class="s4">();</span>
				<span class="s3">break</span><span class="s4">;</span>
			<span class="s3">case </span><span class="s2">'b'</span><span class="s1">:</span>
				<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;b-&gt;Remove&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
				<span class="s1">admin_remove_book</span><span class="s4">();</span>
				<span class="s3">break</span><span class="s4">;</span>
			<span class="s3">case </span><span class="s2">'o'</span><span class="s1">:</span>
				<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;o-&gt;Quit Only&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
				<span class="s1">exit</span><span class="s4">(</span><span class="s5">0</span><span class="s4">);</span>
				<span class="s3">break</span><span class="s4">;</span>
			<span class="s3">case </span><span class="s2">'q'</span><span class="s1">:</span>
				<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;q-&gt;Save&amp;Exit&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
				<span class="s1">lib</span><span class="s4">-&gt;</span><span class="s1">saveFile</span><span class="s4">(</span><span class="s2">&quot;lib.ini&quot;</span><span class="s4">);</span>
				<span class="s1">exit</span><span class="s4">(</span><span class="s5">0</span><span class="s4">);</span>
			<span class="s3">default</span><span class="s1">:</span>
				<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;Invalid choice!&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s4">}</span>
		<span class="s1">newline</span><span class="s4">();</span>
	<span class="s4">}</span>

<span class="s4">};</span>

<span class="s3">void </span><span class="s1">test_saveFile</span><span class="s4">(</span><span class="s3">const </span><span class="s1">String</span><span class="s4">&amp; </span><span class="s1">fileName</span><span class="s4">) {</span>
	<span class="s1">Library lib</span><span class="s4">;</span>
	<span class="s1">lib</span><span class="s4">.</span><span class="s1">addBook</span><span class="s4">(</span><span class="s2">&quot;Hello&quot;</span><span class="s4">);</span>
	<span class="s1">lib</span><span class="s4">.</span><span class="s1">addBook</span><span class="s4">(</span><span class="s2">&quot;1998&quot;</span><span class="s4">);</span>
	<span class="s1">lib</span><span class="s4">.</span><span class="s1">addBook</span><span class="s4">(</span><span class="s2">&quot;xixuanus&quot;</span><span class="s4">);</span>

	<span class="s1">lib</span><span class="s4">.</span><span class="s1">addReader</span><span class="s4">(</span><span class="s2">&quot;xx&quot;</span><span class="s4">);</span>

	<span class="s1">Reader</span><span class="s4">* </span><span class="s1">r </span><span class="s4">= </span><span class="s1">lib</span><span class="s4">.</span><span class="s1">getReader</span><span class="s4">(</span><span class="s2">&quot;xx&quot;</span><span class="s4">);</span>

	<span class="s1">r</span><span class="s4">-&gt;</span><span class="s1">borrowBook</span><span class="s4">(</span><span class="s1">lib</span><span class="s4">.</span><span class="s1">getBook</span><span class="s4">(</span><span class="s2">&quot;xixuanus&quot;</span><span class="s4">));</span>

	<span class="s1">lib</span><span class="s4">.</span><span class="s1">saveFile</span><span class="s4">(</span><span class="s1">fileName</span><span class="s4">);</span>
<span class="s4">}</span>

<span class="s3">void </span><span class="s1">test_loadFile</span><span class="s4">(</span><span class="s3">const </span><span class="s1">String</span><span class="s4">&amp; </span><span class="s1">fileName</span><span class="s4">) {</span>
	<span class="s1">Library lib </span><span class="s4">= </span><span class="s1">Library::loadFile</span><span class="s4">(</span><span class="s1">fileName</span><span class="s4">);</span>

	<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;User &quot; </span><span class="s4">&lt;&lt; </span><span class="s1">lib</span><span class="s4">.</span><span class="s1">getReader</span><span class="s4">(</span><span class="s2">&quot;xx&quot;</span><span class="s4">)-&gt;</span><span class="s1">getName</span><span class="s4">() &lt;&lt; </span><span class="s2">&quot; have borrowed:&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
	<span class="s1">lib</span><span class="s4">.</span><span class="s1">getReader</span><span class="s4">(</span><span class="s2">&quot;xx&quot;</span><span class="s4">)-&gt;</span><span class="s1">showBooks</span><span class="s4">();</span>
<span class="s4">}</span>

<span class="s3">void </span><span class="s1">test_loadAndSave</span><span class="s4">() {</span>
	<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;!&gt; LOAD START&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>

	<span class="s1">Library lib </span><span class="s4">= </span><span class="s1">Library::loadFile</span><span class="s4">(</span><span class="s2">&quot;lib_src.ini&quot;</span><span class="s4">);</span>
	<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;User &quot; </span><span class="s4">&lt;&lt; </span><span class="s1">lib</span><span class="s4">.</span><span class="s1">getReader</span><span class="s4">(</span><span class="s2">&quot;xx&quot;</span><span class="s4">)-&gt;</span><span class="s1">getName</span><span class="s4">() &lt;&lt; </span><span class="s2">&quot; have borrowed:&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
	<span class="s1">lib</span><span class="s4">.</span><span class="s1">getReader</span><span class="s4">(</span><span class="s2">&quot;xx&quot;</span><span class="s4">)-&gt;</span><span class="s1">showBooks</span><span class="s4">();</span>

	<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;!&gt; LOAD COMPLETE&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;!&gt; SAVE START&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>

	<span class="s1">lib</span><span class="s4">.</span><span class="s1">saveFile</span><span class="s4">(</span><span class="s2">&quot;lib_dst.ini&quot;</span><span class="s4">);</span>

	<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;!&gt; SAVE COMPLETE&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
<span class="s4">}</span>

<span class="s3">void </span><span class="s1">test</span><span class="s4">() {</span>
	<span class="s1">Library lib</span><span class="s4">;</span>
	<span class="s1">Book</span><span class="s4">* </span><span class="s1">a </span><span class="s4">= </span><span class="s1">lib</span><span class="s4">.</span><span class="s1">getBook</span><span class="s4">(</span><span class="s2">&quot;Book1&quot;</span><span class="s4">);</span>
	<span class="s1">Book</span><span class="s4">* </span><span class="s1">b </span><span class="s4">= </span><span class="s1">lib</span><span class="s4">.</span><span class="s1">getBook</span><span class="s4">(</span><span class="s2">&quot;Hello&quot;</span><span class="s4">);</span>

	<span class="s1">Reader</span><span class="s4">* </span><span class="s1">u1 </span><span class="s4">= </span><span class="s1">lib</span><span class="s4">.</span><span class="s1">getReader</span><span class="s4">(</span><span class="s2">&quot;xx&quot;</span><span class="s4">);</span>
	<span class="s1">Reader</span><span class="s4">* </span><span class="s1">u2 </span><span class="s4">= </span><span class="s1">lib</span><span class="s4">.</span><span class="s1">getReader</span><span class="s4">(</span><span class="s2">&quot;xx&quot;</span><span class="s4">);</span>

	<span class="s1">u1</span><span class="s4">-&gt;</span><span class="s1">borrowBook</span><span class="s4">(</span><span class="s1">a</span><span class="s4">);</span>
	<span class="s1">u2</span><span class="s4">-&gt;</span><span class="s1">borrowBook</span><span class="s4">(</span><span class="s1">b</span><span class="s4">);</span>

	<span class="s1">u1</span><span class="s4">-&gt;</span><span class="s1">showBooks</span><span class="s4">();</span>
	<span class="s1">u2</span><span class="s4">-&gt;</span><span class="s1">showBooks</span><span class="s4">();</span>

	<span class="s1">lib</span><span class="s4">.</span><span class="s1">searchReader</span><span class="s4">(</span><span class="s2">&quot;xx&quot;</span><span class="s4">)-&gt;</span><span class="s1">showBooks</span><span class="s4">();</span>
<span class="s4">}</span>

<span class="s3">void </span><span class="s1">run</span><span class="s4">(</span><span class="s3">const </span><span class="s1">String</span><span class="s4">&amp; </span><span class="s1">username</span><span class="s4">) {</span>
	<span class="s1">Library lib </span><span class="s4">= </span><span class="s1">Library::loadFile</span><span class="s4">(</span><span class="s2">&quot;lib.ini&quot;</span><span class="s4">);</span>
	<span class="s1">Interface ui</span><span class="s4">(&amp;</span><span class="s1">lib</span><span class="s4">, </span><span class="s1">username</span><span class="s4">);</span>
	<span class="s3">bool </span><span class="s1">isRunning </span><span class="s4">= </span><span class="s3">true</span><span class="s4">;</span>

	<span class="s3">if</span><span class="s4">(</span><span class="s1">username </span><span class="s4">== </span><span class="s2">&quot;admin&quot;</span><span class="s4">) {</span>
		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;Login as &quot; </span><span class="s4">&lt;&lt; </span><span class="s1">username </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s1">ui</span><span class="s4">.</span><span class="s1">menu_admin_info</span><span class="s4">();</span>
		<span class="s3">while</span><span class="s4">(</span><span class="s1">isRunning</span><span class="s4">) {</span>
			<span class="s1">ui</span><span class="s4">.</span><span class="s1">menu_admin</span><span class="s4">();</span>
		<span class="s4">}</span>
	<span class="s4">}</span><span class="s3">else </span><span class="s4">{</span>
		<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;Login as user &quot; </span><span class="s4">&lt;&lt; </span><span class="s1">username </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
		<span class="s1">ui</span><span class="s4">.</span><span class="s1">menu_user_info</span><span class="s4">();</span>
		<span class="s3">while </span><span class="s4">(</span><span class="s1">isRunning</span><span class="s4">) {</span>
			<span class="s1">ui</span><span class="s4">.</span><span class="s1">menu_user</span><span class="s4">();</span>
		<span class="s4">}</span>
	<span class="s4">}</span>


<span class="s4">}</span>

<span class="s3">void </span><span class="s1">usage</span><span class="s4">() {</span>
	<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;Usage: &lt;exe&gt; -&lt;a|u&gt; [username]&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
<span class="s4">}</span>

<span class="s3">int </span><span class="s1">main</span><span class="s4">(</span><span class="s3">int </span><span class="s1">argc</span><span class="s4">, </span><span class="s3">char</span><span class="s4">* </span><span class="s1">argv</span><span class="s4">[]) {</span>

	<span class="s0">#define </span><span class="s1">DEBUG_CODE </span><span class="s5">0</span>

	<span class="s3">if</span><span class="s4">(</span><span class="s1">DEBUG_CODE </span><span class="s4">== </span><span class="s5">0</span><span class="s4">) {</span>
		<span class="s3">if</span><span class="s4">(</span><span class="s1">argc </span><span class="s4">== </span><span class="s5">1</span><span class="s4">) {</span>
			<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;Choose your role: &quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
			<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;1. Admin&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
			<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;2. User&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
			<span class="s3">int </span><span class="s1">c </span><span class="s4">= </span><span class="s1">Interface::key</span><span class="s4">();</span>
			<span class="s3">if</span><span class="s4">(</span><span class="s1">c </span><span class="s4">== </span><span class="s2">'1'</span><span class="s4">) {</span>
				<span class="s1">run</span><span class="s4">(</span><span class="s2">&quot;admin&quot;</span><span class="s4">);</span>
			<span class="s4">}</span><span class="s3">else if</span><span class="s4">(</span><span class="s1">c </span><span class="s4">== </span><span class="s2">'2'</span><span class="s4">) {</span>
				<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;Please enter your username: &quot;</span><span class="s4">;</span>
				<span class="s1">String username</span><span class="s4">;</span>
				<span class="s1">Interface::str</span><span class="s4">(</span><span class="s1">username</span><span class="s4">);</span>
				<span class="s3">if</span><span class="s4">(</span><span class="s1">username</span><span class="s4">.</span><span class="s1">empty</span><span class="s4">() || </span><span class="s1">username </span><span class="s4">== </span><span class="s2">&quot;admin&quot;</span><span class="s4">) {</span>
					<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;Invalid username!&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
					<span class="s1">exit</span><span class="s4">(</span><span class="s5">0</span><span class="s4">);</span>
				<span class="s4">}</span>
				<span class="s1">run</span><span class="s4">(</span><span class="s1">username</span><span class="s4">);</span>
			<span class="s4">}</span><span class="s3">else </span><span class="s4">{</span>
				<span class="s1">cout </span><span class="s4">&lt;&lt; </span><span class="s2">&quot;Invalid choice!&quot; </span><span class="s4">&lt;&lt; </span><span class="s1">endl</span><span class="s4">;</span>
			<span class="s4">}</span>
		<span class="s4">}</span><span class="s3">else if </span><span class="s4">(</span><span class="s1">argc </span><span class="s4">&lt;= </span><span class="s5">3</span><span class="s4">){</span>
			<span class="s3">if</span><span class="s4">(</span><span class="s1">argv</span><span class="s4">[</span><span class="s5">1</span><span class="s4">][</span><span class="s5">0</span><span class="s4">] == </span><span class="s2">'-'</span><span class="s4">) {</span>
				<span class="s3">if</span><span class="s4">(</span><span class="s1">argv</span><span class="s4">[</span><span class="s5">1</span><span class="s4">][</span><span class="s5">1</span><span class="s4">] == </span><span class="s2">'a'</span><span class="s4">) {</span>
					<span class="s1">run</span><span class="s4">(</span><span class="s2">&quot;admin&quot;</span><span class="s4">);</span>
				<span class="s4">}</span><span class="s3">else if</span><span class="s4">(</span><span class="s1">argv</span><span class="s4">[</span><span class="s5">1</span><span class="s4">][</span><span class="s5">1</span><span class="s4">] == </span><span class="s2">'u'</span><span class="s4">) {</span>
					<span class="s3">if</span><span class="s4">(</span><span class="s1">argc </span><span class="s4">== </span><span class="s5">3</span><span class="s4">) {</span>
						<span class="s1">run</span><span class="s4">(</span><span class="s1">argv</span><span class="s4">[</span><span class="s5">2</span><span class="s4">]);</span>
					<span class="s4">}</span><span class="s3">else </span><span class="s4">{</span>
						<span class="s1">usage</span><span class="s4">();</span>
					<span class="s4">}</span>
				<span class="s4">}</span><span class="s3">else </span><span class="s4">{</span>
					<span class="s1">usage</span><span class="s4">();</span>
				<span class="s4">}</span>
			<span class="s4">}</span><span class="s3">else </span><span class="s4">{</span>
				<span class="s1">usage</span><span class="s4">();</span>
			<span class="s4">}</span>
		<span class="s4">}</span><span class="s3">else </span><span class="s4">{</span>
			<span class="s1">usage</span><span class="s4">();</span>
		<span class="s4">}</span>
	<span class="s4">}</span>

	<span class="s3">if</span><span class="s4">( </span><span class="s1">DEBUG_CODE </span><span class="s4">== </span><span class="s5">1</span><span class="s4">) {</span>
		<span class="s1">test_saveFile</span><span class="s4">(</span><span class="s2">&quot;save.ini&quot;</span><span class="s4">);</span>
	<span class="s4">}</span>

	<span class="s3">if</span><span class="s4">( </span><span class="s1">DEBUG_CODE </span><span class="s4">== </span><span class="s5">2</span><span class="s4">) {</span>
		<span class="s1">test_loadFile</span><span class="s4">(</span><span class="s2">&quot;load.ini&quot;</span><span class="s4">);</span>
	<span class="s4">}</span>

	<span class="s3">if</span><span class="s4">( </span><span class="s1">DEBUG_CODE </span><span class="s4">== </span><span class="s5">3</span><span class="s4">) {</span>
		<span class="s1">test_loadAndSave</span><span class="s4">();</span>
	<span class="s4">}</span>

	<span class="s3">if</span><span class="s4">( </span><span class="s1">DEBUG_CODE </span><span class="s4">== </span><span class="s5">4</span><span class="s4">) {</span>
		<span class="s1">test</span><span class="s4">();</span>
	<span class="s4">}</span>

	<span class="s3">return </span><span class="s5">0</span><span class="s4">;</span>
<span class="s4">}</span>

</pre>
</body>
</html>